import{_ as i,c as a,o as t,ag as e}from"./chunks/framework.S-Qvb3wi.js";const c=JSON.parse('{"title":"Supported OAuth2 Flows and Grant Types","description":"","frontmatter":{},"headers":[],"relativePath":"integrator-guide/oauth2/flows-grants.md","filePath":"integrator-guide/oauth2/flows-grants.md"}'),n={name:"integrator-guide/oauth2/flows-grants.md"};function l(h,s,p,k,o,d){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="supported-oauth2-flows-and-grant-types" tabindex="-1">Supported OAuth2 Flows and Grant Types <a class="header-anchor" href="#supported-oauth2-flows-and-grant-types" aria-label="Permalink to &quot;Supported OAuth2 Flows and Grant Types&quot;">​</a></h1><p>Citizen iD supports several OAuth2 flows and grant types to accommodate different types of applications and use cases. This section provides an overview of the supported flows and how to implement them.;</p><div class="warning custom-block github-alert"><p class="custom-block-title">OAuth2 and OpenID Connect (OIDC)</p><p>Citizen iD implements both the OAuth2 framework and the OpenID Connect (OIDC) identity layer on top of OAuth2. Make sure to <strong>utilize existing OIDC libraries and frameworks</strong> when integrating with Citizen iD, as they handle many security aspects and best practices for you.</p><p>There typically is no need to implement most of the following OAuth2 flows manually.</p></div><p>For more information on tokens themselves, please refer to the <a href="./tokens.html">Token Reference</a>.</p><h2 id="authorization-code-flow" tabindex="-1">Authorization Code Flow <a class="header-anchor" href="#authorization-code-flow" aria-label="Permalink to &quot;Authorization Code Flow&quot;">​</a></h2><p>For trying out the authorization code flow, we recommend using <a href="https://oauthdebugger.com/debug" title="OAuth 2.0 Debugger" target="_blank" rel="noreferrer">OAuth 2.0 Debugger</a>. <code>https://citizenid.space/connect/authorize</code> should be used as a value for the <code>Authorize URI</code> parameter.</p><div class="tip custom-block github-alert"><p class="custom-block-title">PKCE Support</p><p>Citizen iD supports the <a href="https://datatracker.ietf.org/doc/html/rfc7636" title="RFC 7636: Proof Key for Code Exchange by OAuth Public Clients" target="_blank" rel="noreferrer">Proof Key for Code Exchange (PKCE)</a> extension to OAuth2. This is especially important for public clients that cannot securely store a client secret.</p></div><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authority=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://citizenid.space</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a3a5953f-8ab0-4d39-a407-d3f0cc9f94da</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">redirect_uri=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://oauthdebugger.com/debug</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {{authority}}/connect/authorize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_id}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">redirect_uri=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{redirect_uri}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scope=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openid profile roles% email offline_access</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response_type=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response_mode=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">form_post</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{$random.alphanumeric(10)}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nonce=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{$random.alphanumeric(10)}}</span></span></code></pre></div><p>After the user successfully authenticates and consents to the requested scopes, they will be redirected to the specified redirect URI with an authorization code. For example <code>nJPLq63gEszvyPspMO9HFx-MMh9C5r5RxsKT_GbFz7c</code>.</p><h3 id="claiming-an-authorization-code" tabindex="-1">Claiming an Authorization Code <a class="header-anchor" href="#claiming-an-authorization-code" aria-label="Permalink to &quot;Claiming an Authorization Code&quot;">​</a></h3><p>To exchange the authorization code for tokens, make a POST request to the token endpoint <code>https://citizenid.space/connect/token</code> with the following parameters:</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authority=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://citizenid.space</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a3a5953f-8ab0-4d39-a407-d3f0cc9f94da</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">redirect_uri=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://oauthdebugger.com/debug</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authorization_code=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nJPLq63gEszvyPspMO9HFx-MMh9C5r5RxsKT_GbFz7c</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {{authority}}/connect/token</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/x-www-form-urlencoded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grant_type=authorization_code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{authorization_code}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_id}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">redirect_uri=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{redirect_uri}}</span></span></code></pre></div><p>The response will include an access token, its type, ID token, granted scopes, optionally a refresh token if the <code>offline_access</code> scope was requested and their expiration time (in seconds).</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;access_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJhdCtqd3QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5MzgyNDYsImlhdCI6MTc1OTkyMzg0Niwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSByb2xlcyBlbWFpbCBvZmZsaW5lX2FjY2VzcyIsImp0aSI6ImM1OTkyYjAzLTZiYWEtNDE4NS1hOTRhLTNiMTQ4ZWNkNjc0MCIsIm9pX3Byc3QiOiJhM2E1OTUzZi04YWIwLTRkMzktYTQwNy1kM2YwY2M5Zjk0ZGEiLCJvaV9hdV9pZCI6IjAxOTlhM2RmLTZjMWEtNzBlOC1hY2Y4LWRiNzJmZDAwYTBmZiIsInN1YiI6IjAxOTlhMTA5LTM2NjItN2Y4My1iMTU1LTViYzUzZGI3YmYyNiIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWtyb25ueSIsInJvbGUiOlsiQ2l0aXplbklkLkFjY291bnRUeXBlLkNpdGl6ZW4iLCJDaXRpemVuSWQuSW50ZWdyYXRvciJdLCJlbWFpbCI6Imtyb25ueTRAZ21haWwuY29tIiwiY2xpZW50X2lkIjoiYTNhNTk1M2YtOGFiMC00ZDM5LWE0MDctZDNmMGNjOWY5NGRhIiwib2lfdGtuX2lkIjoiMDE5OWMzYTItYmM4MC03ZTA4LWI3Y2QtMzI1ZGM2NDMzZTAwIn0.nDYz38XvoG8zaBdTkYzKDyY8_uTJa4OiSXnzkYps7OXS9zUdSJzhOIlhERcOzwUtESj2vDosCJoKJtAENCQ1-0kj6MV8Pem-TXmUpgwUR7VgBWhJXF8ut97eJcq1XMSIu8XSvSG6AvSQeVR4xTPFHY0reOmvI1vA-E9FEdeX-0u570FtSo2DYl7YxDGALuFZCMryTxezMVLK8xpYj4TcNog8vLajHX15WGohqK8A2tPh19kI325VPrd_abEzrSPellpNWytHTsPdiqIwF4Wwe_4zN-0ViNm2K8fakE-2LJFa3riw_z22QnbCdE6l6nhtOfi27ZNjCqad0GR8ofIQSw&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;token_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bearer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;expires_in&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">14400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;scope&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openid profile roles email offline_access&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;id_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5MzgyNDYsImlhdCI6MTc1OTkyMzg0NiwiYXVkIjoiYTNhNTk1M2YtOGFiMC00ZDM5LWE0MDctZDNmMGNjOWY5NGRhIiwib2lfYXVfaWQiOiIwMTk5YTNkZi02YzFhLTcwZTgtYWNmOC1kYjcyZmQwMGEwZmYiLCJzdWIiOiIwMTk5YTEwOS0zNjYyLTdmODMtYjE1NS01YmM1M2RiN2JmMjYiLCJuYW1lIjoidGhla3Jvbm55IiwicHJlZmVycmVkX3VzZXJuYW1lIjoidGhla3Jvbm55Iiwicm9sZSI6WyJDaXRpemVuSWQuQWNjb3VudFR5cGUuQ2l0aXplbiIsIkNpdGl6ZW5JZC5JbnRlZ3JhdG9yIl0sImVtYWlsIjoia3Jvbm55NEBnbWFpbC5jb20iLCJhenAiOiJhM2E1OTUzZi04YWIwLTRkMzktYTQwNy1kM2YwY2M5Zjk0ZGEiLCJub25jZSI6ImEiLCJhdF9oYXNoIjoiekRWRWV0OGVtWVZ0ck9BWGIxR0w5USIsIm9pX3Rrbl9pZCI6IjAxOTljM2EyLWJjYjEtNzRhNC1hMmYzLWU2NWQ2YjIzYjNmMCJ9.FE32_hCziJXOtwIMFq_UgpGPpO46DcBDSg3olAHnoepSFhLd1mP5EEORGtlUI1Yoyi7cqhMfnilN9sBkamco9TBt6Q-Grli-tocxWbaq6sSC16t-_L5-5cEK7VBjBL2zUjCKH0N5sfK4NNv1m1T5Gt5PWDl1LgpUBYB1xr9C1XoGtywjOdUeMqTbCfITaWerKxsBScgS0fnUctPCL1vDcRKN9N_L4cNOJavpcDiqf6zNssrGYmMP_ww3TzFyRoJI0HqbpViz6iMhaEataDoYHj5JoEJQtVvhWPfibVyEXvDHiSNDe8UfcF8P1-jY9uNRsWqhuRDTgKVM5iMyhs9N2Q&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;refresh_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;XdLfCEFkNZBoydqlcsQHIRvdm4cWMmNrb0Y6Wte0Z8I&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="refresh-token-flow" tabindex="-1">Refresh Token Flow <a class="header-anchor" href="#refresh-token-flow" aria-label="Permalink to &quot;Refresh Token Flow&quot;">​</a></h2><p>If the <code>offline_access</code> scope was requested during the authorization process, a refresh token will be included in the token response. This token has a much longer lifetime than access tokens and can be used to obtain new access tokens without requiring the user to re-authenticate.</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authority=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://citizenid.space</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a3a5953f-8ab0-4d39-a407-d3f0cc9f94da</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">refresh_token=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">XdLfCEFkNZBoydqlcsQHIRvdm4cWMmNrb0Y6Wte0Z8I</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {{authority}}/connect/token</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/x-www-form-urlencoded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grant_type=refresh_token</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">refresh_token=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{refresh_token}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_id}}</span></span></code></pre></div><p>Response to the refresh token request will be similar to the one when exchanging an authorization code for tokens:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;access_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJhdCtqd3QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5Mzk2NzEsImlhdCI6MTc1OTkyNTI3MSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSByb2xlcyBlbWFpbCBvZmZsaW5lX2FjY2VzcyIsImp0aSI6ImJjMmVkOGExLWJkNzgtNDdiOS1hNjg1LTk4NDcwODFmYjkyYyIsIm9pX3Byc3QiOiJhM2E1OTUzZi04YWIwLTRkMzktYTQwNy1kM2YwY2M5Zjk0ZGEiLCJvaV9hdV9pZCI6IjAxOTlhM2RmLTZjMWEtNzBlOC1hY2Y4LWRiNzJmZDAwYTBmZiIsInN1YiI6IjAxOTlhMTA5LTM2NjItN2Y4My1iMTU1LTViYzUzZGI3YmYyNiIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWtyb25ueSIsInJvbGUiOlsiQ2l0aXplbklkLkFjY291bnRUeXBlLkNpdGl6ZW4iLCJDaXRpemVuSWQuSW50ZWdyYXRvciJdLCJlbWFpbCI6Imtyb25ueTRAZ21haWwuY29tIiwiY2xpZW50X2lkIjoiYTNhNTk1M2YtOGFiMC00ZDM5LWE0MDctZDNmMGNjOWY5NGRhIiwib2lfdGtuX2lkIjoiMDE5OWMzYjgtN2NkZC03ZmQ1LTg0ZmYtYTMwZWM4YmMwNjgwIn0.ZOXvV9b7fDS6AWnUtu7ly3rk0N9ejVgVH-08l7wbEH3iZNRPL4nXubrophfSSzucsd1hqVUmp7HUOFd4JUiRwuQaJNWUzrEd0LnA6XApn911OMk2fKpGaju9AFlwT-Luxi14XrL0yWUiH9q4oaEmk0RE0-UCs0brPniI5SEqjPv1LJ0z-uGCph_aHUHovF8QIfYv3z7-aLDfqpB8IgBVPq0T3myovaH9BCIohMQWpssKER-6GKzzeQtRATSP_fp7Fjqw81NqRS8kDaTlXeG3URvvIAoxr3e1neXUkstXrtXkaujlgOAiWHRmM6-Vu5Z76SB6BnLOwmw495_1N5Dc3w&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;token_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bearer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;expires_in&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">14399</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;scope&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openid profile roles email offline_access&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;id_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5Mzk2NzEsImlhdCI6MTc1OTkyNTI3MSwiYXVkIjoiYTNhNTk1M2YtOGFiMC00ZDM5LWE0MDctZDNmMGNjOWY5NGRhIiwib2lfYXVfaWQiOiIwMTk5YTNkZi02YzFhLTcwZTgtYWNmOC1kYjcyZmQwMGEwZmYiLCJzdWIiOiIwMTk5YTEwOS0zNjYyLTdmODMtYjE1NS01YmM1M2RiN2JmMjYiLCJuYW1lIjoidGhla3Jvbm55IiwicHJlZmVycmVkX3VzZXJuYW1lIjoidGhla3Jvbm55Iiwicm9sZSI6WyJDaXRpemVuSWQuQWNjb3VudFR5cGUuQ2l0aXplbiIsIkNpdGl6ZW5JZC5JbnRlZ3JhdG9yIl0sImVtYWlsIjoia3Jvbm55NEBnbWFpbC5jb20iLCJhenAiOiJhM2E1OTUzZi04YWIwLTRkMzktYTQwNy1kM2YwY2M5Zjk0ZGEiLCJub25jZSI6IkE0QzRpRWxpZ20iLCJhdF9oYXNoIjoic0dRd0oza0RteUJBVlVTV0dCT3kzZyIsIm9pX3Rrbl9pZCI6IjAxOTljM2I4LTdjZjctN2E1NS05ODY0LTkwZGJhMTA5NWU0MyJ9.IASTvLdmSvUCyr20ng9gIreYH3blS2zGX8pdCYNl6xuP0StjVwLBARWMWHDU8HuevNfrwFk0MBxtnmWnqgB1auUdXPZKTuPZF3-B1JEngBFUabfF1cWZ0IT1_EMaosffTF0Afx8fYyQiBU0Qbt9toegKyfXxgyTpnTb6kYj7gVEpP5Ca-_ez5U8Skv3QQqZ68sPwcc9P-h8as4XIH9z7OwT5XEwMhaqsODRfV50UqpcoarS0Sx4t98hi0grAe56X2ITSRB4lyCw8PYxemSugmfWFcMhv7xdFmzAM-UvoMIlWeOTwxnsqMhAz3zXTOU2byKtuHWKJuvEKdrNrKpwvEw&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;refresh_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3xW07XE_5HXUOHoCNRBCoK-GyeJu9og8bYARixaSE30&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block github-alert"><p class="custom-block-title">Refresh Token Invalidation</p><p>Each time a refresh token is used to obtain new tokens, the refresh token used in the request is invalidated and a new refresh token is issued. However, there is a 30-second grace period during which the old refresh token can still be used. This allows for handling potential network issues or delays in token propagation.</p></div><h2 id="client-credentials" tabindex="-1">Client Credentials <a class="header-anchor" href="#client-credentials" aria-label="Permalink to &quot;Client Credentials&quot;">​</a></h2><p>The Client Credentials flow is used for machine-to-machine (M2M) communication where no user is involved. This flow is suitable for backend services or applications that need to authenticate and authorize themselves to access resources.</p><div class="warning custom-block github-alert"><p class="custom-block-title">Confidential Clients Only</p><p>The Client Credentials Flow can only be used by confidential clients that can securely store and use a client secret.</p></div><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authority=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://citizenid.space</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2c7ec27a-4609-4ad3-a361-22a41f18be6b</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_secret=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a67ff0d8-6a4e-417a-a6c1-f686669bea20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {{authority}}/connect/token</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/x-www-form-urlencoded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grant_type=client_credentials</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_id}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_secret=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_secret}}</span></span></code></pre></div><p>The response will include an access token, its type, granted scopes, and its expiration time (in seconds).</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;access_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJhdCtqd3QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5NDAzMDMsImlhdCI6MTc1OTkyNTkwMywianRpIjoiNWIyYzkyZGQtYjBiNS00ZGFmLTk0ZGYtMTMzZGE3MTkzODA1Iiwic3ViIjoiMmM3ZWMyN2EtNDYwOS00YWQzLWEzNjEtMjJhNDFmMThiZTZiIiwib2lfcHJzdCI6IjJjN2VjMjdhLTQ2MDktNGFkMy1hMzYxLTIyYTQxZjE4YmU2YiIsImNsaWVudF9pZCI6IjJjN2VjMjdhLTQ2MDktNGFkMy1hMzYxLTIyYTQxZjE4YmU2YiIsIm9pX3Rrbl9pZCI6IjAxOTljM2MyLTIyN2QtNzBiMy1hMzBiLWI2NGI0MDM2ZmI5YiJ9.jiH2fVV7oU-kq59waPtkMRNRccBsw3oOV0aiUl8MHXzRbgf41xqfsmksxXwfWgzJmYAQIZOr7rHDyLY7_7sbkxECHLO_Wu6kVC8SwAbDRiixoEO0RPLfMasWsywtz0YvLBUIZCrujJ3gbiwIJkrDOWNjfmfOJSHBay_32pGLwY7TffP1fjV2l4icjKhHWV2j7DVkqrAs5iygnbtFDCwvKgTd2kqyydxPjXJD769H38kHNKe0XzIZzDUDHVnzxNxnG8zgFUGUtjtfiLBqW4dlIuaB7_z3p8PVYttXazBc6xc1GP9KV8pq5k2OmQJtcQWnM-Y6Ongfcj-QePnoPIs1sw&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;token_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bearer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;expires_in&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">14399</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="token-exchange" tabindex="-1">Token Exchange <a class="header-anchor" href="#token-exchange" aria-label="Permalink to &quot;Token Exchange&quot;">​</a></h2><p>The Token Exchange flow allows a client to exchange an existing token for a new token with different scopes or audiences. This is useful in scenarios where a service needs to call another service on behalf of a user or wishes to delegate access to another service.</p><p>The request can include the following parameters in addition to the ones required for all requests (shown in the HTTP request example below).</p><p><strong><code>scope</code></strong><br> Allows requesting a subset of the scopes present in the subject token.</p><table tabindex="0"><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Not provided</td><td>The scopes of the subject token are used.</td></tr><tr><td>Valid scope set</td><td>An intersection of the current and requested scopes is used.</td></tr><tr><td><em>Anything else</em></td><td>The request is rejected with an <code>invalid_scope</code> error.</td></tr></tbody></table><p><strong><code>audience</code></strong><br> Allows changing the <code>aud</code> (audience) claim of the new token to indicate the intended recipient of the token.</p><table tabindex="0"><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Not provided</td><td>The provided <code>client_id</code> is used.</td></tr><tr><td>Allowed value</td><td>The audience of the new token is changed to the provided value.</td></tr><tr><td><em>Anything else</em></td><td>The request is rejected with an <code>invalid_request</code> error.</td></tr></tbody></table><p><strong><code>actor_client_id</code></strong><br> Allows changing the <code>act</code> (actor) claim of the new token to indicate the credentials have been delegated to the specified application. The actor claim value is going to be based on:</p><table tabindex="0"><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Not provided</td><td>The application information corresponding to the provided <code>client_id</code>.</td></tr><tr><td>Valid client ID</td><td>The application information corresponding to the provided <code>actor_client_id</code>.</td></tr><tr><td><em>Anything else</em></td><td>The request is rejected with an <code>invalid_request</code> error.</td></tr></tbody></table><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authority=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://citizenid.space</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a3a5953f-8ab0-4d39-a407-d3f0cc9f94da</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">actor_client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2c7ec27a-4609-4ad3-a361-22a41f18be6b</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {{authority}}/connect/token</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/x-www-form-urlencoded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grant_type=urn:ietf:params:oauth:grant-type:token-exchange</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subject_token=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJhdCtqd3QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5Mzk2NzEsImlhdCI6MTc1OTkyNTI3MSwic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSByb2xlcyBlbWFpbCBvZmZsaW5lX2FjY2VzcyIsImp0aSI6ImJjMmVkOGExLWJkNzgtNDdiOS1hNjg1LTk4NDcwODFmYjkyYyIsIm9pX3Byc3QiOiJhM2E1OTUzZi04YWIwLTRkMzktYTQwNy1kM2YwY2M5Zjk0ZGEiLCJvaV9hdV9pZCI6IjAxOTlhM2RmLTZjMWEtNzBlOC1hY2Y4LWRiNzJmZDAwYTBmZiIsInN1YiI6IjAxOTlhMTA5LTM2NjItN2Y4My1iMTU1LTViYzUzZGI3YmYyNiIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWtyb25ueSIsInJvbGUiOlsiQ2l0aXplbklkLkFjY291bnRUeXBlLkNpdGl6ZW4iLCJDaXRpemVuSWQuSW50ZWdyYXRvciJdLCJlbWFpbCI6Imtyb25ueTRAZ21haWwuY29tIiwiY2xpZW50X2lkIjoiYTNhNTk1M2YtOGFiMC00ZDM5LWE0MDctZDNmMGNjOWY5NGRhIiwib2lfdGtuX2lkIjoiMDE5OWMzYjgtN2NkZC03ZmQ1LTg0ZmYtYTMwZWM4YmMwNjgwIn0.ZOXvV9b7fDS6AWnUtu7ly3rk0N9ejVgVH-08l7wbEH3iZNRPL4nXubrophfSSzucsd1hqVUmp7HUOFd4JUiRwuQaJNWUzrEd0LnA6XApn911OMk2fKpGaju9AFlwT-Luxi14XrL0yWUiH9q4oaEmk0RE0-UCs0brPniI5SEqjPv1LJ0z-uGCph_aHUHovF8QIfYv3z7-aLDfqpB8IgBVPq0T3myovaH9BCIohMQWpssKER-6GKzzeQtRATSP_fp7Fjqw81NqRS8kDaTlXeG3URvvIAoxr3e1neXUkstXrtXkaujlgOAiWHRmM6-Vu5Z76SB6BnLOwmw495_1N5Dc3w</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subject_token_type=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">urn:ietf:params:oauth:token-type:access_token</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">requested_token_type=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">urn:ietf:params:oauth:token-type:access_token</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scope=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">profile</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_id}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">actor_client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{actor_client_id}}</span></span></code></pre></div><p>The response will include a new access token, its type, and its expiration time (in seconds).</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;access_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJhdCtqd3QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5NDIwNzAsImlhdCI6MTc1OTkyNzY3MCwiYXVkIjoiYTNhNTk1M2YtOGFiMC00ZDM5LWE0MDctZDNmMGNjOWY5NGRhIiwic2NvcGUiOiJwcm9maWxlIiwianRpIjoiZmUxMDExNjMtODNmOC00MjU0LTg3MWYtMjUyOGE0MTM4MjZjIiwib2lfcHJzdCI6ImEzYTU5NTNmLThhYjAtNGQzOS1hNDA3LWQzZjBjYzlmOTRkYSIsIm9pX2F1X2lkIjoiMDE5OWEzZGYtNmMxYS03MGU4LWFjZjgtZGI3MmZkMDBhMGZmIiwic3ViIjoiMDE5OWExMDktMzY2Mi03ZjgzLWIxNTUtNWJjNTNkYjdiZjI2IiwicHJlZmVycmVkX3VzZXJuYW1lIjoidGhla3Jvbm55IiwiYWN0Ijp7InN1YiI6IjJjN2VjMjdhLTQ2MDktNGFkMy1hMzYxLTIyYTQxZjE4YmU2YiIsInN1Yl90eXBlIjoiYXBwIiwibmFtZSI6IlRlc3QhIn0sImNsaWVudF9pZCI6ImEzYTU5NTNmLThhYjAtNGQzOS1hNDA3LWQzZjBjYzlmOTRkYSIsIm9pX3Rrbl9pZCI6IjAxOTljM2RkLTE3MjYtNzNkNC1iMTg5LWYzNmMyOTRmYmQzYSJ9.q7TI6g2LaOwbXPoYQhfsXQGMEBTcLtyN79bZbjldgkrhUoxKwWMMnufVb8kBt6vx0yIWOrRUpWtg_LfdxxxTuYO2_UHPNZXekRE-d3xhLNE1ldMruWxN1qintHHMaKgYDlph_hSJXqEeXjRxgW9hpHKlFditNeS5ybewZoR0H1JBsII2u6mMp-OayxZnBs4mjD6FYCeXrTjg_CIfJvsiUwN_4OVAoMwD9NN5Mro9gqUKX04jSevwLPZnd4JaNgqVu0wITdPJvitM_EaJVIzFy7KbFvS6_bBr8-isVFaETNspFcspIS1qqLr6bmYKJ8Avm6hmcvu5Slx0zdLOV5G-BQ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;issued_token_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;urn:ietf:params:oauth:token-type:access_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;token_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bearer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;expires_in&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">14399</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block github-alert"><p class="custom-block-title">Refresh Tokens</p><p>A <code>refresh_token</code> may also be included in the response if the <code>offline_access</code> scope was requested and was granted to the provided subject token.</p></div><p>Not all clients are allowed to use the Token Exchange flow out of the box. If a client that is not authorized to use this flow attempts to do so, they will receive the following error response:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unauthorized_client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;error_description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This client application is not allowed to use the specified grant type.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;error_uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://documentation.openiddict.com/errors/ID2064&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="token-revocation" tabindex="-1">Token Revocation <a class="header-anchor" href="#token-revocation" aria-label="Permalink to &quot;Token Revocation&quot;">​</a></h2><p>Tokens can be individually revoked by the client applications:</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a3a5953f-8ab0-4d39-a407-d3f0cc9f94da</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http://localhost:5085/connect/revoke</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/x-www-form-urlencoded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token=3xW07XE_5HXUOHoCNRBCoK-GyeJu9og8bYARixaSE30</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token_type_hint=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">refresh_token</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_id}}</span></span></code></pre></div><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2c7ec27a-4609-4ad3-a361-22a41f18be6b</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_secret=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a67ff0d8-6a4e-417a-a6c1-f686669bea20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http://localhost:5085/connect/revoke</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> application/x-www-form-urlencoded</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token=eyJhbGciOiJSUzI1NiIsImtpZCI6IkE0MTc2ODhGOUQ4NDgwOTIzQTNDQjRBMTVGNkMzQjJCQTg0MTdDNDIiLCJ4NXQiOiJwQmRvajUyRWdKSTZQTFNoWDJ3N0s2aEJmRUkiLCJ0eXAiOiJhdCtqd3QifQ.eyJpc3MiOiJodHRwczovL2NpdGl6ZW5pZC5zcGFjZS8iLCJleHAiOjE3NTk5NDAzMDMsImlhdCI6MTc1OTkyNTkwMywianRpIjoiNWIyYzkyZGQtYjBiNS00ZGFmLTk0ZGYtMTMzZGE3MTkzODA1Iiwic3ViIjoiMmM3ZWMyN2EtNDYwOS00YWQzLWEzNjEtMjJhNDFmMThiZTZiIiwib2lfcHJzdCI6IjJjN2VjMjdhLTQ2MDktNGFkMy1hMzYxLTIyYTQxZjE4YmU2YiIsImNsaWVudF9pZCI6IjJjN2VjMjdhLTQ2MDktNGFkMy1hMzYxLTIyYTQxZjE4YmU2YiIsIm9pX3Rrbl9pZCI6IjAxOTljM2MyLTIyN2QtNzBiMy1hMzBiLWI2NGI0MDM2ZmI5YiJ9.jiH2fVV7oU-kq59waPtkMRNRccBsw3oOV0aiUl8MHXzRbgf41xqfsmksxXwfWgzJmYAQIZOr7rHDyLY7_7sbkxECHLO_Wu6kVC8SwAbDRiixoEO0RPLfMasWsywtz0YvLBUIZCrujJ3gbiwIJkrDOWNjfmfOJSHBay_32pGLwY7TffP1fjV2l4icjKhHWV2j7DVkqrAs5iygnbtFDCwvKgTd2kqyydxPjXJD769H38kHNKe0XzIZzDUDHVnzxNxnG8zgFUGUtjtfiLBqW4dlIuaB7_z3p8PVYttXazBc6xc1GP9KV8pq5k2OmQJtcQWnM-Y6Ongfcj-QePnoPIs1sw</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token_type_hint=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">access_token</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_id=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_id}}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_secret=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{{client_secret}}</span></span></code></pre></div><p>There will be no content in the response body, and a <code>200 OK</code> status code will indicate that the token has been successfully revoked.</p><hr><p><em>Last updated: October 2025</em></p>`,48)]))}const E=i(n,[["render",l]]);export{c as __pageData,E as default};
